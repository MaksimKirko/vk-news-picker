<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Vk News Picker - Home</title>
    <link href="/public/CSS/style.css" type="text/css" rel="stylesheet">
    <script src="https://vk.com/js/api/openapi.js?140" type="text/javascript"></script>
    <script src="/public/vk-api/news-service.js" type="text/javascript"></script>
</head>

<body>
    <!-- VK API initialization -->
    <script type="text/javascript">
        VK.init({
            apiId: 5909529,
        });
    </script>

    <div id="vk_auth">
        <script type="text/javascript">
            VK.Widgets.Auth('vk_auth', {});
        </script>
    </div>

    <!-- https://vk.com/dev/newsfeed.search?params[q]=%23music&params[extended]=0&params[count]=3&params[v]=5.62 -->
    <div id="news_container">
        <script>
            getNews("#music", 5, function(data) {
                if (data.error) {
                    alert(data.error.error_msg);
                } else {
                    for (i = 0; i < data.response.length; i++) {
                        if (data.response[i].text != null) {
                            document.getElementById('news_container').innerHTML +=
                                "<br> News â„–" + i + "<br>" +
                                data.response[i].text +
                                "<br>";
                            if (data.response[i].attachments != undefined) {
                                for (var j = 0; j < data.response[i].attachments.length; j++) {
                                    if (data.response[i].attachments[j].type == 'photo') {
                                        document.getElementById('news_container').innerHTML +=
                                            '<img src="' + data.response[i].attachments[j].photo.src + '">';
                                    }
                                }
                            }
                        }
                    }
                }
            });
        </script>
    </div>
</body>

</html>
